/*Obfuscated by JShaman.com*/function Sketchpad(_0x2745b4){for(var _0x185dc5 in this['constructor']['prototype'])this[_0x185dc5]=this[_0x185dc5]['bind'](this);_0x2745b4['hasOwnProperty']('element')?('string'==typeof _0x2745b4['element']?this['element']=$(_0x2745b4['element']):this['element']=_0x2745b4['element'],this['_width']=_0x2745b4['width']||this['element']['attr']('data-width')||0x0,this['_height']=_0x2745b4['height']||this['element']['attr']('data-height')||0x0,this['color']=_0x2745b4['color']||this['element']['attr']('data-color')||'#000000',this['penSize']=_0x2745b4['penSize']||this['element']['attr']('data-penSize')||0x5,this['readOnly']=_0x2745b4['readOnly']||this['element']['attr']('data-readOnly')||!0x1,this['readOnly']||this['element']['css']({'cursor':'crosshair'}),this['strokes']=_0x2745b4['strokes']||[],this['_currentStroke']={'color':null,'size':null,'lines':[]},this['undoHistory']=_0x2745b4['undoHistory']||[],this['animateIds']=[],this['_sketching']=!0x1,this['reset']()):console['error']('SKETCHPAD\x20ERROR:\x20No\x20element\x20selected');}Sketchpad['prototype']['_cursorPosition']=function(_0x1eb323){return{'x':_0x1eb323['pageX']-$(this['canvas'])['offset']()['left'],'y':_0x1eb323['pageY']-$(this['canvas'])['offset']()['top']};},Sketchpad['prototype']['_draw']=function(_0x1dad36,_0x2140f5,_0x5ac635,_0x42b264){this['_stroke'](_0x1dad36,_0x2140f5,_0x5ac635,_0x42b264,'source-over');},Sketchpad['prototype']['_erase']=function(_0x490ec2,_0x325dd8,_0x29dc8d,_0x522daf){this['_stroke'](_0x490ec2,_0x325dd8,_0x29dc8d,_0x522daf,'destination-out');},Sketchpad['prototype']['_stroke']=function(_0x3197ca,_0x45f643,_0xde2f69,_0x2d4387,_0x492905){this['context']['save'](),this['context']['lineJoin']='round',this['context']['lineCap']='round',this['context']['strokeStyle']=_0xde2f69,this['context']['lineWidth']=_0x2d4387,this['context']['globalCompositeOperation']=_0x492905,this['context']['beginPath'](),this['context']['moveTo'](_0x3197ca['x'],_0x3197ca['y']),this['context']['lineTo'](_0x45f643['x'],_0x45f643['y']),this['context']['closePath'](),this['context']['stroke'](),this['context']['restore']();},Sketchpad['prototype']['_mouseDown']=function(_0x530bc6){this['_lastPosition']=this['_cursorPosition'](_0x530bc6),this['_currentStroke']['color']=this['color'],this['_currentStroke']['size']=this['penSize'],this['_currentStroke']['lines']=[],this['_sketching']=!0x0,this['canvas']['addEventListener']('mousemove',this['_mouseMove']);},Sketchpad['prototype']['_mouseUp']=function(_0x36462a){this['_sketching']&&(this['strokes']['push']($['extend'](!0x0,{},this['_currentStroke'])),this['_sketching']=!0x1),this['canvas']['removeEventListener']('mousemove',this['_mouseMove']);},Sketchpad['prototype']['_mouseMove']=function(_0xfeab64){var _0x1b4e99=this['_cursorPosition'](_0xfeab64);this['_draw'](this['_lastPosition'],_0x1b4e99,this['color'],this['penSize']),this['_currentStroke']['lines']['push']({'start':$['extend'](!0x0,{},this['_lastPosition']),'end':$['extend'](!0x0,{},_0x1b4e99)}),this['_lastPosition']=_0x1b4e99;},Sketchpad['prototype']['_touchStart']=function(_0x4adfc0){_0x4adfc0['preventDefault'](),this['_sketching']||(this['_lastPosition']=this['_cursorPosition'](_0x4adfc0['changedTouches'][0x0]),this['_currentStroke']['color']=this['color'],this['_currentStroke']['size']=this['penSize'],this['_currentStroke']['lines']=[],this['_sketching']=!0x0,this['canvas']['addEventListener']('touchmove',this['_touchMove'],!0x1));},Sketchpad['prototype']['_touchEnd']=function(_0x139cdb){_0x139cdb['preventDefault'](),this['_sketching']&&(this['strokes']['push']($['extend'](!0x0,{},this['_currentStroke'])),this['_sketching']=!0x1),this['canvas']['removeEventListener']('touchmove',this['_touchMove']);},Sketchpad['prototype']['_touchCancel']=function(_0x1efd94){_0x1efd94['preventDefault'](),this['_sketching']&&(this['strokes']['push']($['extend'](!0x0,{},this['_currentStroke'])),this['_sketching']=!0x1),this['canvas']['removeEventListener']('touchmove',this['_touchMove']);},Sketchpad['prototype']['_touchLeave']=function(_0x122c32){_0x122c32['preventDefault'](),this['_sketching']&&(this['strokes']['push']($['extend'](!0x0,{},this['_currentStroke'])),this['_sketching']=!0x1),this['canvas']['removeEventListener']('touchmove',this['_touchMove']);},Sketchpad['prototype']['_touchMove']=function(_0x2c90f7){_0x2c90f7['preventDefault']();var _0x417983=this['_cursorPosition'](_0x2c90f7['changedTouches'][0x0]);this['_draw'](this['_lastPosition'],_0x417983,this['color'],this['penSize']),this['_currentStroke']['lines']['push']({'start':$['extend'](!0x0,{},this['_lastPosition']),'end':$['extend'](!0x0,{},_0x417983)}),this['_lastPosition']=_0x417983;},Sketchpad['prototype']['reset']=function(){this['canvas']=this['element'][0x0],this['canvas']['width']=this['_width'],this['canvas']['height']=this['_height'],this['context']=this['canvas']['getContext']('2d'),this['redraw'](this['strokes']),this['readOnly']||(this['canvas']['addEventListener']('mousedown',this['_mouseDown']),this['canvas']['addEventListener']('mouseout',this['_mouseUp']),this['canvas']['addEventListener']('mouseup',this['_mouseUp']),this['canvas']['addEventListener']('touchstart',this['_touchStart']),this['canvas']['addEventListener']('touchend',this['_touchEnd']),this['canvas']['addEventListener']('touchcancel',this['_touchCancel']),this['canvas']['addEventListener']('touchleave',this['_touchLeave']));},Sketchpad['prototype']['drawStroke']=function(_0x133092){for(var _0x2af5f3=0x0;_0x2af5f3<_0x133092['lines']['length'];_0x2af5f3++){var _0x16f66e=_0x133092['lines'][_0x2af5f3];this['_draw'](_0x16f66e['start'],_0x16f66e['end'],_0x133092['color'],_0x133092['size']);}},Sketchpad['prototype']['redraw']=function(_0x16fdd2){for(var _0x9ef0ac=0x0;_0x9ef0ac<_0x16fdd2['length'];_0x9ef0ac++)this['drawStroke'](_0x16fdd2[_0x9ef0ac]);},Sketchpad['prototype']['toObject']=function(){return{'width':this['canvas']['width'],'height':this['canvas']['height'],'strokes':this['strokes'],'undoHistory':this['undoHistory']};},Sketchpad['prototype']['toJSON']=function(){return JSON['stringify'](this['toObject']());},Sketchpad['prototype']['animate']=function(_0x1646da,_0x477377,_0x97ef87){this['clear']();for(var _0x2fe7f6=_0x1646da,_0x5ae0c7=null,_0x3ec323=0x0;_0x3ec323<this['strokes']['length'];_0x3ec323++)for(var _0x353b22=this['strokes'][_0x3ec323],_0x530703=0x0;_0x530703<_0x353b22['lines']['length'];_0x530703++){var _0x3675a8=_0x353b22['lines'][_0x530703];_0x5ae0c7=this['_draw']['bind'](this,_0x3675a8['start'],_0x3675a8['end'],_0x353b22['color'],_0x353b22['size']),this['animateIds']['push'](setTimeout(_0x5ae0c7,_0x2fe7f6)),_0x2fe7f6+=_0x1646da;}_0x477377&&(_0x97ef87=_0x97ef87||0x0,_0x5ae0c7=this['animate']['bind'](this,_0x1646da,_0x477377,_0x97ef87),this['animateIds']['push'](setTimeout(_0x5ae0c7,_0x2fe7f6+_0x97ef87)));},Sketchpad['prototype']['cancelAnimation']=function(){for(var _0x593bb7=0x0;_0x593bb7<this['animateIds']['length'];_0x593bb7++)clearTimeout(this['animateIds'][_0x593bb7]);},Sketchpad['prototype']['clear']=function(){this['context']['clearRect'](0x0,0x0,this['canvas']['width'],this['canvas']['height']);},Sketchpad['prototype']['undo']=function(){this['clear']();var _0x355395=this['strokes']['pop']();_0x355395&&(this['undoHistory']['push'](_0x355395),this['redraw'](this['strokes']));},Sketchpad['prototype']['redo']=function(){var _0x5b9398=this['undoHistory']['pop']();_0x5b9398&&(this['strokes']['push'](_0x5b9398),this['drawStroke'](_0x5b9398));};{$('.comment__respond-type\x20.item')['on']('click',function(){$(this)['addClass']('active')['siblings']()['removeClass']('active');if($(this)['attr']('data-type')==='draw'){$('.commentform\x20.body\x20.draw')['show']()['siblings']()['hide']();$('#joe_comment_draw')['prop']('width',$('.commentform\x20.body')['width']());$('.commentform')['attr']('data-type','draw');$('#fa_button')['html']('\x09<button\x20type=\x22submit\x22\x20id=\x22submit\x22\x20onclick=\x22comment_post(1)\x22>发表贴图</button>');}else{$('.commentform\x20.body\x20.text')['show']()['siblings']()['hide']();$('.commentform')['attr']('data-type','text');$('#fa_button')['html']('\x20<button\x20type=\x22button\x22\x20id=\x22submit\x22\x20onclick=\x22postcomment()\x22>发表评论</button>');}});}{if($('#joe_comment_draw')['length']!==0x0){window['sketchpad']=new Sketchpad({'element':'#joe_comment_draw','height':0x12c,'penSize':0x5,'color':'303133'});$('.commentform\x20.body\x20.draw\x20.icon-undo')['on']('click',()=>window['sketchpad']['undo']());$('.commentform\x20.body\x20.draw\x20.icon-animate')['on']('click',()=>window['sketchpad']['animate'](0xa));$('.commentform\x20.body\x20.draw\x20.line\x20li')['on']('click',function(){window['sketchpad']['penSize']=$(this)['attr']('data-line');$(this)['addClass']('active')['siblings']()['removeClass']('active');});$('.commentform\x20.body\x20.draw\x20.color\x20li')['on']('click',function(){window['sketchpad']['color']=$(this)['attr']('data-color');$(this)['addClass']('active')['siblings']()['removeClass']('active');});}}{const respond=$('.joe_comment__respond');$('.joe_comment__reply')['on']('click',function(){const _0x3b155c=$(this)['attr']('data-coid');const _0x3b1d20=$('#'+$(this)['attr']('data-id'));respond['find']('.commentform')['attr']('data-coid',_0x3b155c);_0x3b1d20['append'](respond);$('.comment__respond-type\x20.item[data-type=\x27text\x27]')['click']();$('.joe_comment__cancle')['show']();window['scrollTo']({'top':_0x3b1d20['offset']()['top']-$('.joe_header')['height']()-0xf,'behavior':'smooth'});});$('.joe_comment__cancle')['on']('click',function(){respond['find']('.commentform')['removeAttr']('data-coid');$('.joe_comment__cancle')['hide']();$('.joe_comment__title')['after'](respond);$('.comment__respond-type\x20.item[data-type=\x27text\x27]')['click']();window['scrollTo']({'top':$('.joe_comment')['offset']()['top']-$('.joe_header')['height']()-0xf,'behavior':'smooth'});});}function comment_post(_0x383030){if(_0x383030==0x1){var _0x4e2d36=document['getElementById']('joe_comment_draw');var _0x35498a=_0x4e2d36['getContext']('2d');var _0x49dcc6='jpg';comment['value']='[img]'+_0x4e2d36['toDataURL'](_0x49dcc6)+'[/img]';}var _0x35cb6d=![];if(_0x35cb6d)return;_0x35cb6d=!![];var _0x4fedbf=$('#commentform')['serialize']();$('.comment_info')['html']('<img\x20src=\x22'+jsui['uri']+'static/img/loading.gif\x22>');var _0x29a677=blog_url+'index.php?action=addcom';$['ajax']({'type':'POST','url':_0x29a677,'data':_0x4fedbf,'success':function(_0x970082){_0x35cb6d=![];var _0x2976bd=/<div class=\"main\">[\r\n]*<p>(.*?)<\/p>/i;_0x2976bd['test'](_0x970082)?$('.comment_info')['html'](_0x970082['match'](_0x2976bd)[0x1])['show']()['fadeIn'](0x9c4):(_0x2976bd=$('input[name=pid]')['val'](),cancelReply(),$('[name=comment]')['val'](''),$('.commentlist')['html']($(_0x970082)['find']('.commentlist')['html']()),0x0!=_0x2976bd?(_0x970082=window['opera']?'CSS1Compat'==document['compatMode']?$('html'):$('body'):$('html,body'),_0x970082['animate']({'scrollTop':$('#comment-'+_0x2976bd)['offset']()['top']-0xfa},'normal',function(){$('.comment_info')['html']('')['fadeIn'](0x9c4);})):(_0x970082=window['opera']?'CSS1Compat'==document['compatMode']?$('html'):$('body'):$('html,body'),_0x970082['animate']({'scrollTop':$('.commentlist')['offset']()['top']-0xfa},'normal',function(){$('.comment_info')['html']('')['fadeIn'](0x9c4);})));var _0x1b4a0e=$('.c_code');_0x1b4a0e['click']();pjax_done();}});_0x35cb6d=![];return!0x1;}